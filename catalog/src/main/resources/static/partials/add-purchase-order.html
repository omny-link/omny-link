<ul class="form edit-form">
  <li class="form-group">
    <label class="col-md-3 col-sm-3 col-xs-4 required">{{#tenant.strings.contact}}{{tenant.strings.contact}}{{else}}Contact{{/}}:</label>
    <input class="form-control" list="contacts" onblur="ractive.updateContactId(this.value)" placeholder="Start typing to filter options"
                id="purchaseOrderContact" required value="{{instanceToStart.processVariables.order.contactName}}">
    <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">Person this {{tenant.strings.order.toLowerCase()}} is for</p>
  </li>
  <li class="form-group">
    <label class="col-md-3 col-sm-3 col-xs-4 col-xs-4">{{#tenant.strings.owner}}{{tenant.strings.owner}}{{else}}Owner{{/}}: </label>
    <input class="form-control" list="owners" placeholder="Start typing to filter options" id="purchaseOrderOwner" {{#if !matchRole('power_user')}}readonly disabled{{/if}} value="{{instanceToStart.processVariables.order.owner}}">
    <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{#tenant.strings.orderOwnerHint}}{{tenant.strings.orderOwnerHint}}{{else}}Person responsible for this {{tenant.strings.order.toLowerCase()}}{{/}}</p>
  </li>
  <li class="form-group">
    <label class="col-md-3 col-sm-3 col-xs-4 col-xs-4">{{#tenant.strings.orderDate}}{{tenant.strings.orderDate}}{{else}}Order Date{{/}}:</label>
    <input class="form-control col-md-8 col-sm-8 col-xs-8" id="purchaseOrderDate" type="date" value="{{instanceToStart.processVariables.order.date}}"/>
    <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{#tenant.strings.orderDateHint}}{{tenant.strings.orderDateHint}}{{else}}Date {{#tenant.strings.order}}{{tenant.strings.order.toLowerCase()}}{{else}}order{{/}} placed{{/}}</p>
  </li>
  <li class="form-group">
    <label class="col-md-3 col-sm-3 col-xs-4">{{#tenant.strings.orderStage}}{{tenant.strings.orderStage}}{{else}}Stage{{/}}:</label>
    <input autocomplete="off" class="form-control" list="orderStages" placeholder="Start typing to filter options" id="purchaseOrderStage" value="{{instanceToStart.processVariables.order.stage}}"/>
    <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{#tenant.strings.orderStageHint}}{{tenant.strings.orderStageHint}}{{else}}Stage the {{#tenant.strings.order}}{{tenant.strings.order.toLowerCase()}}{{else}}order{{/}} has reached{{/}}</p>
  </li>
  {{#tenant.features.orderDueDate}}
    <li class="form-group">
      <label class="col-md-3 col-sm-3 col-xs-4 col-xs-4">{{#tenant.strings.dueDate}}{{tenant.strings.dueDate}}{{else}}Due Date{{/}}:</label>
      <input class="form-control col-md-8 col-sm-8 col-xs-8" id="purchaseOrderDueDate" type="date" value="{{instanceToStart.processVariables.order.dueDate}}"/>
      <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{#tenant.strings.dueDateHint}}{{tenant.strings.dueDateHint}}{{else}}Date {{#tenant.strings.order}}{{tenant.strings.order.toLowerCase()}}{{else}}order{{/}} due to be delivered{{/}}</p>
    </li>
  {{/}}
  {{#tenant.features.catalog}}
    <li class="form-group">
      <label class="col-md-3 col-sm-3 col-xs-4 required">{{#tenant.strings.stockItem}}{{tenant.strings.stockItem}}{{else}}Stock Item{{/}}:</label>
      {{#if instanceToStart.processVariables.order.orderItems}}
        <input class="form-control" list="stockItems" onblur="ractive.updateStockItem(this.value)" placeholder="Start typing to filter options"
            id="purchaseOrderStockItem" readonly disabled twoway="false" value="{{formatStockItemIds(current)}}">
      {{else}}
        <input class="form-control" list="stockItems" onblur="ractive.updateStockItem(this.value)" placeholder="Start typing to filter options"
              id="purchaseOrderStockItem" required value="{{#instanceToStart.processVariables.order.stockItem}}{{instanceToStart.processVariables.order.stockItem.name}}{{/}}">
      {{/if}}
      <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{tenant.strings.stockItem}} this {{tenant.strings.order.toLowerCase()}} is for</p>
    </li>
  {{/}}
  {{#tenant.features.orderName}}
    <li class="form-group">
      <label class="col-md-3 col-sm-3 col-xs-4">{{#tenant.strings.orderName}}{{tenant.strings.orderName}}{{else}}Name{{/}}:</label>
      <input class="form-control" id="purchaseOrderName" value="{{instanceToStart.processVariables.order.name}}">
      <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{#tenant.strings.orderNameHint}}{{tenant.strings.orderNameHint}}{{/}}</p>
    </li>
  {{/}}
  {{#tenant.features.stockPricing}}
    <li class="form-group">
      <label class="col-md-3 col-sm-3 col-xs-4">{{#tenant.strings.price}}{{tenant.strings.price}}{{else}}Price{{/}}:</label>
      <input class="form-control" id="purchaseOrderPrice" step="any" type="number" value="{{instanceToStart.processVariables.order.price}}">
      <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{#tenant.strings.priceHint}}{{tenant.strings.priceHint}}{{else}}Price for the {{tenant.strings.order.toLowerCase()}}{{/}}</p>
    </li>
    <li class="form-group">
      <label class="col-md-3 col-sm-3 col-xs-4">{{#tenant.strings.tax}}{{tenant.strings.tax}}{{else}}VAT{{/}}:</label>
      <input class="form-control" id="purchaseOrderTax" step="any" type="number" value="{{instanceToStart.processVariables.order.tax}}">
      <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{#tenant.strings.taxHint}}{{tenant.strings.taxHint}}{{else}}Tax due on the {{tenant.strings.order.toLowerCase()}}{{/}}</p>
    </li>
    <li class="form-group">
      <label class="col-md-3 col-sm-3 col-xs-4">{{#tenant.strings.totalPrice}}{{tenant.strings.totalPrice}}{{else}}Total Price{{/}}:</label>
      <input class="form-control" id="purchaseOrderTotalPrice" disabled readonly step="any" twoway="false" type="number" value="{{(isNaN(instanceToStart.processVariables.order.price) ? 0 : instanceToStart.processVariables.order.price)+(isNaN(instanceToStart.processVariables.order.tax) ? 0 : instanceToStart.processVariables.order.tax)}}">
      <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{#tenant.strings.totalPriceHint}}{{tenant.strings.totalPriceHint}}{{else}}Total of price and VAT{{/}}</p>
    </li>
  {{/}}
  {{#if tenant.features.orderInvoiceRef}}
    <li class="form-group">
      <label class="col-md-3 col-sm-3 col-xs-4">{{#tenant.strings.invoiceRef}}{{tenant.strings.invoiceRef}}{{else}}Invoice Ref{{/}}:</label>
      <input class="form-control" id="purchaseOrderInvoiceRef" value="{{instanceToStart.processVariables.order.invoiceRef}}">
      <p class="col-md-offset-3 col-sm-offset-3 col-xs-offset-4 help-block">{{#tenant.strings.invoiceRefHint}}{{tenant.strings.invoiceRefHint}}{{else}}Invoice reference for {{tenant.strings.order.toLowerCase()}}{{/}}</p>
    </li>
  {{/if}}
</ul>
<script type="text/javascript">
  $(document).ready(function() { $.getScript(ractive.getServer()+'/catalog/2.2.0/js/add-purchase-order.js'); });
</script>
